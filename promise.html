<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>promise函数</title>
</head>
<body>
    
</body>
<script src="browser.min.js"></script>
<script>
    var promise = new Promise(( res,rej )=>{
        setTimeout(()=>{
            res();
        },3000)  
    })
    //primose异步操作完成之后  调用then可以接受结果
    promise.then(()=>{
        console.log(2)
    })

    //异步加载图片
    function loadImage( src ){
        return new Promise(( res, rej )=>{
            var img = new Image();
            img.onload = ()=>{
                res( src )
            }
            img.onerror = ()=>{
                rej('不能找到图片')
            }
            img.src = src;
        })
    }
    //调用loadImage  返回一个promise对象  图片加载成功后返回一个src  then（src）这里就可以接收到 非常炫酷
    loadImage( '../css3/.jpg' ).then(( data )=>{
        document.write( data )
    }).catch(( error )=>{        //这里catch用来捕获错误  错误信息就是 promise函数里面的rej（error）传过来的
        console.log( error );
    })
</script>
</html>